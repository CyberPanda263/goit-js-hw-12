{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport {initializeLightbox} from \"../main.js\"\n\n\nexport function errorMassage() {\n    iziToast.show({\n        message: \"Sorry, there are no images matching your search query. Please try again!\",\n        position: 'topRight',\n        backgroundColor: 'rgb(239, 64, 64)',\n        theme: 'dark',\n    });\n}\n\nexport function noImageMassage() {\n    iziToast.show({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n        backgroundColor: '#4e75ff',\n        theme: 'dark',\n    });\n}\n\nexport function startRender(images, page, gallery) {\n    renderGallery(images, gallery);\n    if(page > 1) {\n        window.scrollBy({\n            top: gallery.firstElementChild.getBoundingClientRect().height * 2,\n            behavior: \"smooth\",\n        });\n    }\n    initializeLightbox();\n}\n\n\nexport function renderGallery(images, gallery) {\n    \n    const galleryArr = [];\n\n    images.hits.forEach(image => {\n\n        const li = document.createElement(\"li\");\n        li.classList = \"gallery-item\";\n\n        const divGallerys = document.createElement(\"div\");\n        divGallerys.classList = \"gallerys\";\n\n        const a = document.createElement(\"a\");\n        a.classList = \"gallery-link\";\n        a.setAttribute(\"href\", `${image.largeImageURL}`);\n\n        const img = document.createElement(\"img\");\n        img.classList = \"gallery-image\";\n        img.setAttribute(\"src\",`${image.webformatURL}`);\n        img.setAttribute(\"alt\", `${image.tags}`);\n\n        const divItem = document.createElement(\"div\");\n        divItem.classList = \"gallery-item-description\";\n        \n        const ul = document.createElement(\"ul\");\n        ul.classList = \"gallery-item-list\";\n        \n        const h3Value = [\"likes\", \"views\", \"comments\", \"downolads\"];\n        const pValue = [`${image.likes}`, `${image.views}`, `${image.comments}`, `${image.downloads}`];\n\n        for(let i = 0; i < 4 ; i++) {\n            const li = document.createElement(\"li\");\n            li.classList = \"gallery-item-list-item\";\n            const h3 = document.createElement(\"h3\");\n            h3.textContent = `${h3Value[i]}`;\n            const p = document.createElement(\"p\");\n            p.textContent = `${pValue[i]}`;\n            li.append(h3);\n            li.append(p);\n            ul.append(li);\n        }\n\n        divItem.append(ul);\n        a.append(img);\n        divGallerys.append(a);\n        li.append(divGallerys);\n        li.append(divItem);\n\n        galleryArr.push(li);\n    })\n\n    gallery.append(...galleryArr);\n}","import axios from 'axios';\n\nexport async function search(q, page, perPage) {\n    const options = new URLSearchParams({\n        per_page: perPage,\n        page: page,\n        key: \"44067044-e8359f631c20f41f339c4060c\",\n        q: q,\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: \"true\",\n    });\n\n  const response = await axios.get(`https://pixabay.com/api/?${options}`);\n\n  return response.data;\n};\n","const form = document.querySelector(\".search-form\");\nconst gallery = document.querySelector(\".gallery-list\");\nconst loader = document.querySelector(\"#loader\");\nconst up = document.querySelector(\".up\");\nconst loadMore = document.querySelector(\".show-more-btn\");\nlet page = 1;\nlet q;\nconst perPage = 15;\n\nimport { errorMassage, noImageMassage, startRender, renderGallery } from \"./js/render-functions\";\nimport { search } from \"./js/pixabay-api\";\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.css';\n\nlet galleryList;\n\nexport function initializeLightbox() {\n    if (galleryList) {\n        galleryList.destroy();\n    }\n    galleryList = new SimpleLightbox('.gallerys a', {\n        captionDelay: 200,\n    });\n}\n\nform.addEventListener(\"submit\", async (event) => {\n    event.preventDefault();\n    gallery.innerHTML = \"\";\n    page = 1;\n    loader.style.display = \"block\";\n    q = form.elements.searchItem.value.trim().replace(\" \", \"+\");\n    \n    try {\n        const images = await search(q, page, perPage);\n        loader.style.display = \"none\";\n        \n        if (images.hits.length !== 0) {\n            startRender(images, page, gallery);\n            page += 1;\n            if(images.totalHits > perPage) {\n                loadMore.style.display = \"block\";\n            }else {\n                loadMore.style.display = \"none\";\n            }\n        } else {\n            errorMassage();\n        }\n    } catch (error) {\n        loader.style.display = \"none\";\n        console.error(\"Error fetching images:\", error);\n        errorMassage();\n    }\n});\n\nloadMore.addEventListener(\"click\", async () => {\n    try {\n        const images = await search(q, page, perPage);\n        if ((page * perPage) < images.totalHits) {\n            startRender(images, page, gallery);\n            page += 1;\n        } else {\n            if(images.hits.length !== 0){\n                startRender(images, page, gallery);\n                page += 1;\n                if(images.totalHits <= perPage) {\n                    loadMore.style.display = \"block\";\n                }else {\n                    noImageMassage();\n                    loadMore.style.display = \"none\";\n                }\n            }\n        }\n    } catch (error) {\n        console.error(\"Error fetching more images:\", error);\n        noImageMassage();\n    }\n});\n\nup.addEventListener(\"click\", () => {\n    window.scroll({\n        top: 0,\n        behavior: \"smooth\"\n    });\n});\n\ninitializeLightbox();\n"],"names":["errorMassage","iziToast","noImageMassage","startRender","images","page","gallery","renderGallery","initializeLightbox","galleryArr","image","li","divGallerys","img","divItem","ul","h3Value","pValue","i","h3","p","search","q","perPage","options","axios","form","loader","up","loadMore","galleryList","SimpleLightbox","event","error"],"mappings":"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"}
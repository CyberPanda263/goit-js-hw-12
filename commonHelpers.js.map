{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n\nexport function errorMassage() {\n    iziToast.show({\n        message: \"Sorry, there are no images matching your search query. Please try again!\",\n        position: 'topRight',\n        backgroundColor: 'rgb(239, 64, 64)',\n        theme: 'dark',\n    });\n}\n\nexport function noImageMassage() {\n    iziToast.show({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n        backgroundColor: '#4e75ff',\n        theme: 'dark',\n    });\n}\n\nexport function startRender(q, page, gallery) {\n    search(q, page)\n    .then(\n    ({images, pageNum}) => {\n        loader.style.display = \"none\";\n        if(images.hits.length != 0) {\n            renderGallery(images, gallery);\n            page = pageNum;\n        }else{\n            errorMassage();\n        }\n    }\n)\n.catch((error) => console.log(`error ${error}`));\n}\n\n\nexport function renderGallery(images, gallery, loadMore) {\n    \n    const galleryArr = [];\n\n    images.hits.forEach(image => {\n\n        const li = document.createElement(\"li\");\n        li.classList = \"gallery-item\";\n\n        const divGallerys = document.createElement(\"div\");\n        divGallerys.classList = \"gallerys\";\n\n        const a = document.createElement(\"a\");\n        a.classList = \"gallery-link\";\n        a.setAttribute(\"href\", `${image.largeImageURL}`);\n\n        const img = document.createElement(\"img\");\n        img.classList = \"gallery-image\";\n        img.setAttribute(\"src\",`${image.webformatURL}`);\n        img.setAttribute(\"alt\", `${image.tags}`);\n\n        const divItem = document.createElement(\"div\");\n        divItem.classList = \"gallery-item-description\";\n        \n        const ul = document.createElement(\"ul\");\n        ul.classList = \"gallery-item-list\";\n        \n        const h3Value = [\"likes\", \"views\", \"comments\", \"downolads\"];\n        const pValue = [`${image.likes}`, `${image.views}`, `${image.comments}`, `${image.downloads}`];\n\n        for(let i = 0; i < 4 ; i++) {\n            const li = document.createElement(\"li\");\n            li.classList = \"gallery-item-list-item\";\n            const h3 = document.createElement(\"h3\");\n            h3.textContent = `${h3Value[i]}`;\n            const p = document.createElement(\"p\");\n            p.textContent = `${pValue[i]}`;\n            li.append(h3);\n            li.append(p);\n            ul.append(li);\n        }\n\n        divItem.append(ul);\n        a.append(img);\n        divGallerys.append(a);\n        li.append(divGallerys);\n        li.append(divItem);\n\n        galleryArr.push(li);\n    })\n\n    gallery.append(...galleryArr);\n    loadMore.style.display = \"block\";\n}","import axios from 'axios';\n\nexport async function search(q, page, perPage) {\n    const options = new URLSearchParams({\n        per_page: perPage,\n        page: page,\n        key: \"44067044-e8359f631c20f41f339c4060c\",\n        q: q,\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: \"true\",\n    });\n\n    page += 1;\n\n  const response = await axios.get(`https://pixabay.com/api/?${options}`);\n\n  return {images: response.data, pageNum: page};\n};\n","const form = document.querySelector(\".search-form\");\nconst gallery = document.querySelector(\".gallery-list\");\nconst loader = document.querySelector(\"#loader\");\nconst up = document.querySelector(\".up\");\nconst loadMore = document.querySelector(\".show-more-btn\");\nlet page = 1;\nlet q;\nconst perPage = 15;\n\nimport { errorMassage, noImageMassage, renderGallery } from \"./js/render-functions\";\nimport { search } from \"./js/pixabay-api\";\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.css';\n\nlet galleryList;\n\nfunction initializeLightbox() {\n    if (galleryList) {\n        galleryList.destroy();\n    }\n    galleryList = new SimpleLightbox('.gallerys a', {\n        captionDelay: 200,\n    });\n}\n\nform.addEventListener(\"submit\", async (event) => {\n    event.preventDefault();\n    gallery.innerHTML = \"\";\n    page = 1;\n    loader.style.display = \"block\";\n    q = form.elements.searchItem.value.trim().replace(\" \", \"+\");\n    \n    try {\n        const { images, pageNum } = await search(q, page, perPage);\n        loader.style.display = \"none\";\n        \n        if (images.hits.length !== 0) {\n            renderGallery(images, gallery, loadMore);\n            page = pageNum;\n            initializeLightbox();\n        } else {\n            errorMassage();\n        }\n    } catch (error) {\n        loader.style.display = \"none\";\n        console.error(\"Error fetching images:\", error);\n        errorMassage();\n    }\n});\n\nloadMore.addEventListener(\"click\", async () => {\n    try {\n        const { images, pageNum } = await search(q, page, perPage);\n        if ((page * perPage) < images.totalHits) {\n            renderGallery(images, gallery, loadMore);\n            window.scrollBy({\n                top: gallery.firstElementChild.getBoundingClientRect().height * 2,\n                behavior: \"smooth\",\n            });\n            page = pageNum;\n            initializeLightbox();\n        } else {\n            noImageMassage();\n            loadMore.style.display = \"none\";\n        }\n    } catch (error) {\n        console.error(\"Error fetching more images:\", error);\n        noImageMassage();\n    }\n});\n\nup.addEventListener(\"click\", () => {\n    window.scroll({\n        top: 0,\n        behavior: \"smooth\"\n    });\n});\n\ninitializeLightbox();\n"],"names":["errorMassage","iziToast","noImageMassage","renderGallery","images","gallery","loadMore","galleryArr","image","li","divGallerys","a","img","divItem","ul","h3Value","pValue","i","h3","p","search","q","page","perPage","options","axios","form","loader","up","galleryList","initializeLightbox","SimpleLightbox","event","pageNum","error"],"mappings":"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"}
{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n\nexport function errorMassage() {\n    iziToast.show({\n        message: \"Sorry, there are no images matching your search query. Please try again!\",\n        position: 'topRight',\n        backgroundColor: 'rgb(239, 64, 64)',\n        theme: 'dark',\n    });\n}\n\nexport function noImageMassage() {\n    iziToast.show({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n        backgroundColor: '#4e75ff',\n        theme: 'dark',\n    });\n}\n\nexport function startRender(q, page, gallery) {\n    search(q, page)\n    .then(\n    ({images, pageNum}) => {\n        loader.style.display = \"none\";\n        if(images.hits.length != 0) {\n            renderGallery(images, gallery);\n            page = pageNum;\n        }else{\n            errorMassage();\n        }\n    }\n)\n.catch((error) => console.log(`error ${error}`));\n}\n\n\nexport function renderGallery(images, gallery, loadMore) {\n    \n    const galleryArr = [];\n\n    images.hits.forEach(image => {\n\n        const li = document.createElement(\"li\");\n        li.classList = \"gallery-item\";\n\n        const divGallerys = document.createElement(\"div\");\n        divGallerys.classList = \"gallerys\";\n\n        const a = document.createElement(\"a\");\n        a.classList = \"gallery-link\";\n        a.setAttribute(\"href\", `${image.largeImageURL}`);\n\n        const img = document.createElement(\"img\");\n        img.classList = \"gallery-image\";\n        img.setAttribute(\"src\",`${image.webformatURL}`);\n        img.setAttribute(\"alt\", `${image.tags}`);\n\n        const divItem = document.createElement(\"div\");\n        divItem.classList = \"gallery-item-description\";\n        \n        const ul = document.createElement(\"ul\");\n        ul.classList = \"gallery-item-list\";\n        \n        const h3Value = [\"likes\", \"views\", \"comments\", \"downolads\"];\n        const pValue = [`${image.likes}`, `${image.views}`, `${image.comments}`, `${image.downloads}`];\n\n        for(let i = 0; i < 4 ; i++) {\n            const li = document.createElement(\"li\");\n            li.classList = \"gallery-item-list-item\";\n            const h3 = document.createElement(\"h3\");\n            h3.textContent = `${h3Value[i]}`;\n            const p = document.createElement(\"p\");\n            p.textContent = `${pValue[i]}`;\n            li.append(h3);\n            li.append(p);\n            ul.append(li);\n        }\n\n        divItem.append(ul);\n        a.append(img);\n        divGallerys.append(a);\n        li.append(divGallerys);\n        li.append(divItem);\n\n        galleryArr.push(li);\n    })\n\n    gallery.append(...galleryArr);\n    loadMore.style.display = \"block\";\n}","import axios from 'axios';\n\nexport async function search(q, page, perPage) {\n    const options = new URLSearchParams({\n        per_page: perPage,\n        page: page,\n        key: \"44067044-e8359f631c20f41f339c4060c\",\n        q: q,\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: \"true\",\n    });\n\n    page += 1;\n\n  const response = await axios.get(`https://pixabay.com/api/?${options}`);\n\n  return {images: response.data, pageNum: page};\n};\n","const form = document.querySelector(\".search-form\");\nconst gallery = document.querySelector(\".gallery-list\");\nconst loader = document.querySelector(\"#loader\");\nconst up = document.querySelector(\".up\");\nconst loadMore = document.querySelector(\".show-more-btn\");\nlet galleryList = document.querySelector(\".gallerys\");\nlet page = 1;\nlet q;\nconst perPage = 15;\n\nimport {errorMassage} from \"./js/render-functions\";\nimport {noImageMassage} from \"./js/render-functions\";\nimport {renderGallery} from \"./js/render-functions\";\nimport {search} from \"./js/pixabay-api\";\nimport {startRender} from \"./js/render-functions\";\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.css';\n\nform.addEventListener(\"submit\", async event => {\n    event.preventDefault();\n    gallery.innerHTML = \"\";\n    page = 1;\n    loader.style.display = \"block\";\n    q = form.elements.searchItem.value.replace(\" \", \"+\");\n    search(q, page, perPage)\n    .then(\n        ({images, pageNum}) => {\n            loader.style.display = \"none\";\n            if(images.hits.length != 0) {\n                galleryList.refresh();\n                renderGallery(images, gallery, loadMore);\n                page = pageNum;\n            }else{\n                errorMassage();\n            }\n        }\n    )\n})\n\nloadMore.addEventListener(\"click\", async event => {\n    search(q, page, perPage)\n    .then(\n        ({images, pageNum}) => {\n            if((page * perPage) < images.totalHits) {\n                //galleryList.refresh();\n                renderGallery(images, gallery, loadMore);\n                window.scrollBy({\n                   top: gallery.firstElementChild.getBoundingClientRect().height * 2,\n                   behavior: \"smooth\",\n                });\n                page = pageNum;\n            }else{\n                noImageMassage();\n                loadMore.style.display = \"none\";\n            }\n\n        }\n    )\n});\n\nup.addEventListener(\"click\", event => {\n    window.scroll({\n        top: 0,\n        behavior: \"smooth\",\n})\n})\n\n\n\ngalleryList = new SimpleLightbox('.gallerys a', {\n    captionDelay: 200,\n  });"],"names":["errorMassage","iziToast","noImageMassage","renderGallery","images","gallery","loadMore","galleryArr","image","li","divGallerys","a","img","divItem","ul","h3Value","pValue","i","h3","p","search","q","page","perPage","options","axios","form","loader","up","galleryList","event","pageNum","SimpleLightbox"],"mappings":"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"}